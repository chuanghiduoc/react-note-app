{"ast":null,"code":"var _jsxFileName = \"/Users/levanbaotrong/react-note-app/client/src/components/NoteShare.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Input, Button, message } from 'antd';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NoteShare = () => {\n  _s();\n  const {\n    shareableLink\n  } = useParams();\n  const [password, setPassword] = useState('');\n  const [noteContent, setNoteContent] = useState('');\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  useEffect(() => {\n    const checkPasswordAndFetchNote = () => {\n      // Gửi yêu cầu GET để kiểm tra mật khẩu và lấy nội dung ghi chú\n      axios.get(`/api/share/${shareableLink}?password=${password}`).then(response => {\n        // Nếu mật khẩu hợp lệ, lưu nội dung ghi chú và đánh dấu đã xác thực\n        setNoteContent(response.data.content);\n        setIsAuthenticated(true);\n      }).catch(error => {\n        // Xử lý lỗi khi mật khẩu không hợp lệ hoặc không tìm thấy ghi chú\n        if (error.response && error.response.status === 401) {\n          message.error('Mật khẩu không hợp lệ');\n        } else if (error.response && error.response.status === 404) {\n          message.error('Không tìm thấy ghi chú');\n        } else {\n          message.error('Lỗi không xác định');\n        }\n      });\n    };\n\n    // Gọi hàm kiểm tra mật khẩu và lấy nội dung ghi chú khi component được tạo\n    checkPasswordAndFetchNote();\n  }, []);\n  const checkPasswordAndFetchNote = () => {\n    // Gửi yêu cầu GET để kiểm tra mật khẩu và lấy nội dung ghi chú\n    axios.get(`/api/share/${shareableLink}?password=${password}`).then(response => {\n      // Nếu mật khẩu hợp lệ, lưu nội dung ghi chú và đánh dấu đã xác thực\n      setNoteContent(response.data.content);\n      setIsAuthenticated(true);\n    }).catch(error => {\n      // Xử lý lỗi khi mật khẩu không hợp lệ hoặc không tìm thấy ghi chú\n      if (error.response && error.response.status === 401) {\n        message.error('Mật khẩu không hợp lệ');\n      } else if (error.response && error.response.status === 404) {\n        message.error('Không tìm thấy ghi chú');\n      } else {\n        message.error('Lỗi không xác định');\n      }\n    });\n  };\n  const handlePasswordChange = e => {\n    setPassword(e.target.value);\n  };\n  const handleAccessNote = () => {\n    // Kiểm tra mật khẩu và lấy nội dung ghi chú khi người dùng nhấn nút \"Truy cập\"\n    checkPasswordAndFetchNote();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: isAuthenticated ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"N\\u1ED9i dung ghi ch\\xFA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: noteContent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Truy c\\u1EADp ghi ch\\xFA chia s\\u1EBB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",\n        value: password,\n        onChange: handlePasswordChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: handleAccessNote,\n        children: \"Truy c\\u1EADp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(NoteShare, \"PN+ZVmxtAtoQz225lkRZa+E5vA0=\", false, function () {\n  return [useParams];\n});\n_c = NoteShare;\nexport default NoteShare;\nvar _c;\n$RefreshReg$(_c, \"NoteShare\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Input","Button","message","axios","jsxDEV","_jsxDEV","NoteShare","_s","shareableLink","password","setPassword","noteContent","setNoteContent","isAuthenticated","setIsAuthenticated","checkPasswordAndFetchNote","get","then","response","data","content","catch","error","status","handlePasswordChange","e","target","value","handleAccessNote","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","onClick","_c","$RefreshReg$"],"sources":["/Users/levanbaotrong/react-note-app/client/src/components/NoteShare.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Input, Button, message } from 'antd';\nimport axios from 'axios';\n\nconst NoteShare = () => {\n  const { shareableLink } = useParams();\n  const [password, setPassword] = useState('');\n  const [noteContent, setNoteContent] = useState('');\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  useEffect(() => {\n    const checkPasswordAndFetchNote = () => {\n      // Gửi yêu cầu GET để kiểm tra mật khẩu và lấy nội dung ghi chú\n      axios\n        .get(`/api/share/${shareableLink}?password=${password}`)\n        .then((response) => {\n          // Nếu mật khẩu hợp lệ, lưu nội dung ghi chú và đánh dấu đã xác thực\n          setNoteContent(response.data.content);\n          setIsAuthenticated(true);\n        })\n        .catch((error) => {\n          // Xử lý lỗi khi mật khẩu không hợp lệ hoặc không tìm thấy ghi chú\n          if (error.response && error.response.status === 401) {\n            message.error('Mật khẩu không hợp lệ');\n          } else if (error.response && error.response.status === 404) {\n            message.error('Không tìm thấy ghi chú');\n          } else {\n            message.error('Lỗi không xác định');\n          }\n        });\n    };\n  \n    // Gọi hàm kiểm tra mật khẩu và lấy nội dung ghi chú khi component được tạo\n    checkPasswordAndFetchNote();\n  }, []);\n\n\n  const checkPasswordAndFetchNote = () => {\n    // Gửi yêu cầu GET để kiểm tra mật khẩu và lấy nội dung ghi chú\n    axios\n      .get(`/api/share/${shareableLink}?password=${password}`)\n      .then((response) => {\n        // Nếu mật khẩu hợp lệ, lưu nội dung ghi chú và đánh dấu đã xác thực\n        setNoteContent(response.data.content);\n        setIsAuthenticated(true);\n      })\n      .catch((error) => {\n        // Xử lý lỗi khi mật khẩu không hợp lệ hoặc không tìm thấy ghi chú\n        if (error.response && error.response.status === 401) {\n          message.error('Mật khẩu không hợp lệ');\n        } else if (error.response && error.response.status === 404) {\n          message.error('Không tìm thấy ghi chú');\n        } else {\n          message.error('Lỗi không xác định');\n        }\n      });\n  };\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const handleAccessNote = () => {\n    // Kiểm tra mật khẩu và lấy nội dung ghi chú khi người dùng nhấn nút \"Truy cập\"\n    checkPasswordAndFetchNote();\n  };\n\n  return (\n    <div>\n      {isAuthenticated ? (\n        <div>\n          <h2>Nội dung ghi chú</h2>\n          <p>{noteContent}</p>\n        </div>\n      ) : (\n        <div>\n          <h2>Truy cập ghi chú chia sẻ</h2>\n          <Input\n            type=\"password\"\n            placeholder=\"Nhập mật khẩu\"\n            value={password}\n            onChange={handlePasswordChange}\n          />\n          <Button type=\"primary\" onClick={handleAccessNote}>\n            Truy cập\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default NoteShare;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}